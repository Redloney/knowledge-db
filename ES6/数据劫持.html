<body>
</body>

<style>
</style>

<script>

  var obj = {
    name: "张三",
    age: 20
  }

  // 定义响应式
  function defineReactive (target, key, val) {
    Object.defineProperty(target, key, {
      get () {
        return val
      },
      set (newVal) {
        console.log("更新页面");
        if (newVal !== val) {
          val = newVal
        }
      },
      configurable: true,
      enumerable: true
    })
  }

  // 观察者
  function observe (target) {
    if (typeof target !== 'object' || target === null) {
      return target
    }
    for (let key in target) {
      defineReactive(target, key, target[key])
    }
  }

  observe(obj);
  obj.age = 24
  obj.name = '王花花'
  console.log(obj);


</script>